--- RELEASE NOTES - 04-Nov-2022 ---

-- PRE-DEPLOYMENT STEPS --

1. Take backup.
2. Turn off Email Deliverablity.

-- DEPLOYMENT --

1. For WINDOWS
    a. sfdx force:source:convert --rootdir force-app --outputdir tmp_convert
    b. jar -cfM DRL.zip tmp_convert
    c. rmdir /s tmp_convert
    d. sfdx force:mdapi:deploy --checkonly --zipfile DRL.zip --targetusername ORG_ALIAS --testlevel RunSpecifiedTests --runtests DRL_LeadTriggerHelperTest,DRL_CampaignInfluenceTriggerHelperTest,DRL_UpdatePotentialAtLaunchBatchTest,DRL_convertLeadProspectTest,DRL_OpportunityTriggerHelperTest,LeadReminderEmailSchedulerTest,opportunityAPITest,OpportunityControllerTest,CampaignApproval_Test,DRL_OfflineOpportunityTest,OpportunityTriggerHandlerTest,populateValuesInsertTest,DRLUtilTest,AccountTeamAccessHelperTest,CampaignMemberStatusTest,OpportunityJourneyHandler2Test,LeadTriggerHandlerTest,Testmomedit,OppClassTrigger,DRL_LeadCleanupBatchTest
2. For MAC
    a. sfdx force:source:convert --rootdir force-app --outputdir tmp_convert
    b. zip -r DRL.zip tmp_convert
    c. rm -r tmp_convert
    d. sfdx force:mdapi:deploy --checkonly --zipfile DRL.zip --targetusername ORG_ALIAS --testlevel RunSpecifiedTests --runtests DRL_LeadTriggerHelperTest,DRL_CampaignInfluenceTriggerHelperTest,DRL_UpdatePotentialAtLaunchBatchTest,DRL_convertLeadProspectTest,DRL_OpportunityTriggerHelperTest,LeadReminderEmailSchedulerTest,opportunityAPITest,OpportunityControllerTest,CampaignApproval_Test,DRL_OfflineOpportunityTest,OpportunityTriggerHandlerTest,populateValuesInsertTest,DRLUtilTest,AccountTeamAccessHelperTest,CampaignMemberStatusTest,OpportunityJourneyHandler2Test,LeadTriggerHandlerTest,Testmomedit,OppClassTrigger,DRL_LeadCleanupBatchTest
    e. rm -r DRL.zip


-- POST-DEPLOYMENT STEPS --
1. Activate the Opportunity Contact Role Creation Flow & Calculate Potential at Launch on Opportunity flow.
2. Add Convert(DRL_Convert) Quick Action in Lead Layout
3. Assign the DRL_Prospect_Record_Page lead record page to the Prospect record for API Sales app and for below profiles.
    - Admin
    - Marketing Manager User
    - Marketing Manager User with Account Creation Permissions
4. Assign the "Pardot Permission" permission set to the System Admin.
5. Make Country Field Mandatory on Lead Layout
6. Execute the DRL_LeadCleanupBatch batch job.
7. Turn on Email Deliverablity.
8. Add following fields on Campaign-Campaign Layout (Layout)
    *DRL_CampaignCode__c - Campaign Code
    *DRL_ValueBioBatchOrderedOpportunities__c - Value Bio Batch Ordered Opportunities
9. Add following changes on Opportunity-Opportunity API (Layout)
    *Add RelatedCampaignInfluence2List related list
    *remove RelatedContactRoleList related list 
10. Add following changes on Lead-Lead Layout (Layout)
    *Add Lead.DRL_Prospect__c(Leads) related list
    *Add Following fields
        +Lead Information Section
            -RecordTypeId - Lead Record Type
            -DRL_SourceCampaign__c - Source Campaign
            -DRL_Prospect__c -Prospect
        +Contact Information Section 
            -DRL_Email__c - Lead Email
        +system information section
            -DRL_UTMSource__c - UTM Source 
            -DRL_UTMCampaign__c - UTM Campaign 
    *make country(Select_Country__c) - required
    *remove old convert(Lead.Convert) quick action and add new convert(Lead.DRL_Convert) quick Action
    *remove Mobile & Lightning Quick Action Email(SendEmail) and add Email(DRL_Email)










